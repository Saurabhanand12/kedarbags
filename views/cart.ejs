<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KedarBags</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;600;700&display=swap" rel="stylesheet">

</head>
<body>
   <div>
        <!-- Navbar -->
        <div class="bg-warning d-flex fixed-top align-items-center px-4" style="width: 100%; height: 100px;">
            <a href="/home" style="text-decoration: none;"><div class="h2 mb-0 fw-bold fs-1 text-black">KedarBags ðŸŽ’</div></a>
            <a href="/shop" class="h5 ms-5 text-dark text-decoration-none">ðŸ›’ Shop</a>
        </div>
        <div style="margin-left: 90px;padding-top:120px;margin-top: 20px;">
            <div class="h1 fw-semibold mb-5">Your Shopping Cart ðŸ›’</div>
        </div>
        <!-- Page content -->
        <%user.cart.forEach(function(item){%>
            <div class="" style="padding-top:120px;">
            <div style="margin-top: -80px;margin-left: 90px;">
            <div class="d-flex flex-column">
                <div class="rounded d-flex align-items-center mb-1 border " style="width: 900px; height:200px; padding: 20px;background-color:rgb(239, 239, 239);">
                    <!-- Image placeholder -->
                    <div class="rounded" style="height:130px; width:130px;">
                        <img src="data:image/jpeg;base64,<%= item.image.toString('base64') %>"  alt="<%=item.name %>" style="height:130px; width:130px;" class="object-fit-cover rounded">
                    </div>
                    
                    <!-- Text content -->
                    <div class="ms-5" >
                        <div class="h4 mb-2"><%=item.name%></div>
                        <div class="mb-2">
                            <span class="h4 mb-4">â‚¹<%=item.price%></span> 
                            <div class="mt-1"><span>M.R.F:</span> 
                            <span style="text-decoration: line-through;">â‚¹<%=item.discount %></span></div>
                        </div>
                        <a href="/removefromcart/<%= item._id %>" class="text-danger h5" style="text-decoration:none;"> Remove </a>
                    </div>
                    <div class="mt-2 d-flex justify-content-end d-flex align-items-center ms-auto me-1" style="margin-right:-30px;">
                        <div class="fs-5 fw-bold m-2 mt-4" >Select Quantity</div>
                            <select class="px-5 py-2 mt-4 rounded-pill"  style="border: 2px solid rgb(185, 152, 157);" >
                                <option value="1" selected>Qty:1</option>
                                <option value="2">Qty:2</option>
                                <option value="3">Qty:3</option>
                                <option value="4">Qty:4</option>
                                <option value="5">Qty:5</option>
                            </select>
                    </div>
                </div>
            </div>
        </div>
        <%})%>
        
                    <!-- order box -->
        <%if(user.cart && user.cart.length > 0){%>
            <div style="margin-top: 60px;margin-bottom: 110px;margin-left: 90px;">
            <div class="rounded bg-warning" style="width: 1000px;min-height:400px;">
                <div class="fw-semibold fs-1 px-5 py-4" style="margin-top: 20px;">Order Summary</div>
                <div class="d-flex justify-content-between fs-5 px-5 py-1">
                    <div>Subtotal</div>
                   <div>â‚¹<%= typeof subtotal !== 'undefined' ? subtotal : 0 %></div>
                </div>
                <div class="d-flex justify-content-between fs-5 px-5 py-1">
                    <div>Shipping</div>
                    <div>Free</div>
                </div>
                <div class="d-flex justify-content-between fs-5 px-5 py-1">
                    <div>Tax + Gst</div>
                    <div>â‚¹20</div>
                </div>
                <hr class="my-2 fw-bold">
                <span class="d-flex justify-content-between fs-5 px-5 py-1 fw-bold">
                    <div>Total</div>
                    <div>â‚¹<%= typeof bill !== 'undefined' ? bill : 0 %></div>
                </span>
                <a href="/checkout"><input type="submit" value="Proceed to Checkout" class="fw-bold rounded-pill border" style="height: 50px;width: 800px;margin-left: 89px;margin-top: 20px;"></a>
            </div>
        </div>
        <% } else { %>
            
            <div style="margin-left: 90px;">
                <div class="h3 fw-bold">Your Cart is Empty</div>
                <div class="d-flex">
                    <div class="h5 mt-4 mx-4">Go Shopping page</div>
                    <a href="/shop" class="btn btn-warning rounded mt-4" 
                   style="width: 200px; height:50px; display:flex; justify-content:center; align-items:center; text-decoration:none; font-weight:bold;">
       Shop Now
    </a>
            </div>
        <% } %>

                <!-- footer -->
        <%if(user.cart && user.cart.length > 0){%>
         <footer class="bg-dark text-white d-flex justify-content-center align-items-center" style="height: 110px;width: 100%;">
            <p class="mb-0">Â© 2025 KedarbagsðŸŽ’ | All Rights Reserved</p>
        </footer>
        <%} else {%>
        <footer class="bg-dark text-white d-flex justify-content-center align-items-center fixed-bottom" style="height: 110px;width: 100%;">
            <p class="mb-0">Â© 2025 KedarbagsðŸŽ’ | All Rights Reserved</p>
        </footer>
        <%}%>

   </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>